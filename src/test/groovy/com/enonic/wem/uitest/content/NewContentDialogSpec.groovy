package com.enonic.wem.uitest.contentimport com.enonic.autotests.pages.contentmanager.browsepanel.ContentBrowsePanelimport com.enonic.autotests.pages.contentmanager.browsepanel.NewContentDialogimport com.enonic.autotests.pages.contentmanager.browsepanel.NewContentDialog.FilterNameimport com.enonic.autotests.services.NavigatorHelperimport com.enonic.wem.uitest.BaseGebSpecimport spock.lang.Sharedclass NewContentDialogSpec    extends BaseGebSpec{    @Shared    ContentBrowsePanel contentBrowsePanel;    def setup()    {        go "admin"        contentBrowsePanel = NavigatorHelper.openContentApp( getTestSession() );    }    def "GIVEN content App BrowsePanel WHEN New button clicked THEN 'new-content' dialog with title 'What do you whant to create' showed"()    {        when:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        then:        newContentDialog.isOpened();    }    def "GIVEN content App BrowsePanel  WHEN 'new-content dialog' was opened THEN 'All' 'Content' 'Sites' filter items are present"()    {        when:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        then:        newContentDialog.isPresentElement( NewContentDialog.SHOW_ALL_LINK ) &&            newContentDialog.isPresentElement( NewContentDialog.FILTER_BY_SITES_LINK ) &&            newContentDialog.isPresentElement( NewContentDialog.FILTER_BY_CONTENT_LINK );    }    def "GIVEN opened a 'new-content' dialog WHEN 'Sites' filter item was clicked THEN number of items in the list-view and number in link Sites(...) are equals"()    {        given:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        int beforeFiltering = newContentDialog.getNumberContentTypesFromList();        // get number of types from the string: 'Sites(3)', or Content(43):        int expectedNumberOfContentTypes = newContentDialog.getNumberContentTypesFromFilterLink( FilterName.SITES );        when:        newContentDialog.doFilterBySites();        then:        int filterdContentTypes = newContentDialog.getNumberContentTypesFromList();        filterdContentTypes < beforeFiltering && filterdContentTypes == expectedNumberOfContentTypes;    }    def "GIVEN opened a 'new-content' dialog WHEN 'Content(...)' link was clicked THEN number of items in the list-view and number in link Content(...) are equals"()    {        given:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        int beforeFiltering = newContentDialog.getNumberContentTypesFromList();        // get number of types from the string: 'Sites(3)', or Content(43):        int expectedNumberOfContentTypes = newContentDialog.getNumberContentTypesFromFilterLink( FilterName.CONTENT );        when:        newContentDialog.doFilterByContent();        then:        int filterdContentTypes = newContentDialog.getNumberContentTypesFromList();        filterdContentTypes < beforeFiltering && filterdContentTypes == expectedNumberOfContentTypes;    }    def "GIVEN opened a 'new-content' dialog WHEN 'All(...)' link was clicked THEN number of items in the list-view and number in link All(...) are equals"()    {        given:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        // get number of types from the string: 'Sites(3)', or Content(43):        int expectedNumberOfContentTypes = newContentDialog.getNumberContentTypesFromFilterLink( FilterName.SHOW_ALL );        when:        newContentDialog.doClickShowAll();        then:        int filterdContentTypes = newContentDialog.getNumberContentTypesFromList();        filterdContentTypes == expectedNumberOfContentTypes;    }    def "GIVEN opened a 'new-content' dialog WHEN 'Sites(...)' link was clicked THEN number of items in the list and number in link All(...) are equals"()    {        given:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        when:        newContentDialog.doFilterBySites();        then:        int filterdContentTypes = newContentDialog.getNumberContentTypesFromList();    }    def "GIVEN opened a 'new-content' dialog and 'All' link is active WHEN 'Content(...)' link was clicked THEN 'Content' link is active "()    {        given:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        when:        newContentDialog.doFilterByContent();        then:        newContentDialog.isLinkActive( FilterName.CONTENT ) && !newContentDialog.isLinkActive( FilterName.SHOW_ALL );    }    def "GIVEN opened a 'new-content' dialog and 'All' link is active WHEN 'Sites(...)' link was clicked THEN 'Sites' link is active "()    {        given:        NewContentDialog newContentDialog = contentBrowsePanel.clickToolbarNew();        when:        newContentDialog.doFilterBySites();        then:        newContentDialog.isLinkActive( FilterName.SITES ) && !newContentDialog.isLinkActive( FilterName.SHOW_ALL );    }}